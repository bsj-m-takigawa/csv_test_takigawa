# CSV 仕様

## インポート
- エンドポイント: POST /api/csv/import (multipart/form-data, csv_file)
- ヘッダ例: ID,名前,メールアドレス,電話番号,住所,生年月日,性別,会員状態,メモ,プロフィール画像,ポイント,最終ログイン
- 行単位検証: email形式、重複、必須(name,email)、日付(YYYY-MM-DD)
- バッチ: 一定件数ごとにトランザクション。失敗時はロールバック
- エラー行: 行番号/理由を含むCSVを返却可能にする

## エクスポート
- エンドポイント: GET /api/users/export (text/csv)
- 方式: 高速ストリーミング + チャンク処理
- パフォーマンス: 大規模データセット（100万件）に最適化
- ヘッダ固定: ID,名前,メールアドレス,電話番号,住所,生年月日,性別,会員状態,メモ,プロフィール画像,ポイント,最終ログイン
- 値の正規化: カンマ/改行を含むフィールドはクオート、改行は\n
## バルクエクスポート
- エンドポイント: POST /api/users/bulk-export (text/csv)
- 対応モード:
  - 個別選択: 指定したuser_idsのユーザーのみエクスポート
  - 全件選択: 全データベースのユーザーをエクスポート
  - 条件選択: 検索・フィルター条件に一致するユーザーのみエクスポート
- パフォーマンス: メモリ効率最適化、チャンク処理により安定動作
- ファイル名: 自動生成（例：selected_users_2025-08-06_143022.csv）
